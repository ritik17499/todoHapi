{"ast":null,"code":"import _regeneratorRuntime from\"/Users/macbookpro/Documents/todo-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/macbookpro/Documents/todo-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/macbookpro/Documents/todo-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/macbookpro/Documents/todo-frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/macbookpro/Documents/todo-frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/macbookpro/Documents/todo-frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{withRouter,Router,NavLink,Link}from'react-router-dom';import'../App.css';import{baseUrl}from'../components/BaseUrl';import Swal from\"sweetalert2\";import logo from'../assets/images/logo.png';var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.validateForm=function(){var _this$state=_this.state,email=_this$state.email,password=_this$state.password;if(email.length==0){Swal.fire({title:\"Empty!\",text:\"Please enter username\",icon:\"error\",confirmButtonText:\"OK\"});}else if(password.length==0){Swal.fire({title:\"Empty!\",text:\"Please enter password\",icon:\"error\",confirmButtonText:\"OK\"});}else{_this.doLogin();}};_this.doLogin=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _this$state2,email,password,req;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_this$state2=_this.state,email=_this$state2.email,password=_this$state2.password;_this.setState({isLoading:true,isDisabled:true});req={method:\"POST\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"},body:JSON.stringify({email:\"\".concat(email),password:\"\".concat(password)})};_context.next=5;return fetch(\"\".concat(baseUrl,\"appAcademy/login\"),req).then(function(response){return response.json();}).then(function(responseJson){// console.warn(responseJson);\nif(responseJson.msg===\"Logged in!\"){localStorage.setItem(\"token\",responseJson.token);localStorage.setItem(\"name\",responseJson.user.name);_this.setState({isLoading:false,isDisabled:false});Swal.fire({title:\"Success\",text:'Login successful!',icon:\"success\",confirmButtonText:\"OK\"}).then(function(){_this.props.history.push(\"/todo\");});}else{_this.setState({isLoading:false,isDisabled:false});Swal.fire({title:\"Error!\",text:'An error occurred. Please try again later.',icon:\"error\",confirmButtonText:\"OK\"});}}).catch(function(error){_this.setState({isLoading:false,isDisabled:false});Swal.fire({title:\"Error!\",text:error.message,icon:\"error\",confirmButtonText:\"OK\"});});case 5:case\"end\":return _context.stop();}},_callee);}));_this.state={email:'',password:'',isLoading:false,isDisabled:false};return _this;}_createClass(Login,[{key:\"render\",value:function render(){var _this2=this;var _this$state3=this.state,isLoading=_this$state3.isLoading,isDisabled=_this$state3.isDisabled;return/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 offset-md-3\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"text-center text-dark mt-5\"},\"Account Login\"),/*#__PURE__*/React.createElement(\"div\",{className:\"text-center mb-5 text-dark\"},\"App Academy\"),/*#__PURE__*/React.createElement(\"div\",{className:\"card my-5\"},/*#__PURE__*/React.createElement(\"form\",{className:\"card-body cardbody-color p-lg-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-center\"},/*#__PURE__*/React.createElement(\"img\",{src:logo,className:\"img-fluid profile-image-pic img-thumbnail my-3\",width:\"200px\",alt:\"logo\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-3\"},/*#__PURE__*/React.createElement(\"input\",{type:\"email\",className:\"form-control\",id:\"email\",\"aria-describedby\":\"email\",placeholder:\"Email\",onChange:function onChange(e){return _this2.setState({email:e.target.value});}})),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-3\"},/*#__PURE__*/React.createElement(\"input\",{type:\"password\",className:\"form-control\",id:\"password\",placeholder:\"password\",onChange:function onChange(e){return _this2.setState({password:e.target.value});}})),/*#__PURE__*/React.createElement(\"div\",{className:\"text-center\"},/*#__PURE__*/React.createElement(\"button\",{disabled:isDisabled,onClick:function onClick(e){return _this2.validateForm();},type:\"button\",class:\"btn btn-danger font-weight-bold px-5 mb-5 w-100\"},isLoading?'loading ...':\"Login\")),/*#__PURE__*/React.createElement(\"div\",{id:\"emailHelp\",className:\"form-text text-center mb-5 text-dark\"},\"Not Registered? \",/*#__PURE__*/React.createElement(Link,{to:\"/register\",className:\"text-dark fw-bold\"},\" Create an Account\")))))));}}]);return Login;}(Component);export default withRouter(Login);","map":{"version":3,"names":["React","Component","withRouter","Router","NavLink","Link","baseUrl","Swal","logo","Login","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","validateForm","_this$state","state","email","password","length","fire","title","text","icon","confirmButtonText","doLogin","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_this$state2","req","wrap","_callee$","_context","prev","next","setState","isLoading","isDisabled","method","headers","Accept","body","JSON","stringify","concat","fetch","then","response","json","responseJson","msg","localStorage","setItem","token","user","name","history","push","catch","error","message","stop","_createClass","key","value","render","_this2","_this$state3","createElement","className","src","width","alt","type","id","placeholder","onChange","e","target","disabled","onClick","class","to"],"sources":["/Users/macbookpro/Documents/todo-frontend/src/pages/Login.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { withRouter, Router, NavLink, Link } from 'react-router-dom';\nimport '../App.css';\nimport { baseUrl } from '../components/BaseUrl';\nimport Swal from \"sweetalert2\";\nimport logo from '../assets/images/logo.png';\n\nclass Login extends Component {\n\n  constructor(props){\n    super(props);\n    this.state = {\n      email: '',\n      password: '',\n      isLoading: false,\n      isDisabled: false\n    }\n  }\n\n  validateForm = () => {\n    const { email, password } = this.state;\n    if(email.length == 0){\n      Swal.fire({\n        title: \"Empty!\",\n        text: \"Please enter username\",\n        icon: \"error\",\n        confirmButtonText: \"OK\",\n      });\n    }else if(password.length == 0){\n      Swal.fire({\n        title: \"Empty!\",\n        text: \"Please enter password\",\n        icon: \"error\",\n        confirmButtonText: \"OK\",\n      });\n    }else{\n      this.doLogin();\n    }\n  }\n\n  doLogin = async () => {\n    const { email, password } = this.state;\n    this.setState({isLoading: true, isDisabled: true})\n    let req = {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        email: `${email}`,\n        password: `${password}`,\n\n      }),\n    };\n    await fetch(`${baseUrl}appAcademy/login`, req)\n      .then((response) => response.json())\n      .then((responseJson) => {\n        // console.warn(responseJson);\n        if(responseJson.msg === \"Logged in!\"){\n          localStorage.setItem(\"token\", responseJson.token)\n          localStorage.setItem(\"name\", responseJson.user.name)\n          this.setState({isLoading: false, isDisabled: false})\n          Swal.fire({\n            title: \"Success\",\n            text: 'Login successful!',\n            icon: \"success\",\n            confirmButtonText: \"OK\",\n          }).then(()=> {\n            this.props.history.push(\"/todo\")\n          })\n        }else{\n          this.setState({isLoading: false, isDisabled: false})\n          Swal.fire({\n            title: \"Error!\",\n            text: 'An error occurred. Please try again later.',\n            icon: \"error\",\n            confirmButtonText: \"OK\",\n          });\n        }\n      })\n      .catch((error) => {\n        this.setState({isLoading: false, isDisabled: false})\n        Swal.fire({\n          title: \"Error!\",\n          text: error.message,\n          icon: \"error\",\n          confirmButtonText: \"OK\",\n        });\n      })\n     }\n\n\n  render(){\n    const { isLoading, isDisabled } = this.state;\n    return(\n      <div className=\"container\">\n      <div className=\"row\">\n        <div className=\"col-md-6 offset-md-3\">\n          <h2 className=\"text-center text-dark mt-5\">Account Login</h2>\n          <div className=\"text-center mb-5 text-dark\">App Academy</div>\n          <div className=\"card my-5\">\n\n            <form className=\"card-body cardbody-color p-lg-5\">\n\n              <div className=\"text-center\">\n                <img src={logo} className=\"img-fluid profile-image-pic img-thumbnail my-3\"\n                  width=\"200px\" alt=\"logo\" />\n              </div>\n\n              <div className=\"mb-3\">\n                <input type=\"email\" className=\"form-control\" id=\"email\" aria-describedby=\"email\"\n                  placeholder=\"Email\"\n                  onChange={(e) =>\n                    this.setState({ email: e.target.value })\n                  }\n                  />\n              </div>\n              <div className=\"mb-3\">\n                <input type=\"password\" className=\"form-control\" id=\"password\" placeholder=\"password\"\n                onChange={(e) =>\n                  this.setState({ password: e.target.value })\n                }\n                />\n              </div>\n              <div className=\"text-center\"><button disabled={isDisabled} onClick={(e) => this.validateForm()} type=\"button\" class=\"btn btn-danger font-weight-bold px-5 mb-5 w-100\">\n              {isLoading ? (\n                'loading ...'\n              ) : (\n                \"Login\"\n              )}\n              </button></div>\n              <div id=\"emailHelp\" className=\"form-text text-center mb-5 text-dark\">Not\n                Registered? <Link to=\"/register\" className=\"text-dark fw-bold\"> Create an\n                  Account</Link>\n              </div>\n            </form>\n          </div>\n\n        </div>\n      </div>\n    </div>\n\n    )\n  }\n}\n\nexport default withRouter(Login)\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}